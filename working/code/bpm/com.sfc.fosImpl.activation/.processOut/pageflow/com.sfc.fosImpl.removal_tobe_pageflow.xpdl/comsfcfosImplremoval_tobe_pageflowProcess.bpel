<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="comsfcfosImplremoval_tobe_pageflowProcess"
    suppressJoinFailure="yes" tibex:bxVersion="1.15.0"
    tibex:explicitCompensation="yes"
    tibex:xpdlId="_p7fOoN_CEeec4K-r6PSjHg"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ns="http://xmlns.example.com/1513751864707"
    xmlns:ns0="http://www.tibco.com/schemas/SFC_FOS_BPM/SharedResources/SchemaDefinitions/Schema.xsd"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns="http://xmlns.example.com/1513751864707"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="ContractorMobileTask">
            <startingVariables>
                <variable>CommentText</variable>
                <variable>SelectedContractor</variable>
                <variable>SelectedGroup</variable>
                <variable>TaskName</variable>
                <variable>GroupNames</variable>
                <variable>CommentHistory</variable>
                <variable>Provisioning_Data</variable>
                <variable>TechnicalInfo</variable>
                <variable>ContractorNames</variable>
            </startingVariables>
        </task>
        <task name="ConfirmDetails">
            <startingVariables>
                <variable>CommentText</variable>
                <variable>SelectedGroup</variable>
                <variable>SelectedContractor</variable>
                <variable>TaskName</variable>
                <variable>GroupNames</variable>
                <variable>Provisioning_Data</variable>
                <variable>CommentHistory</variable>
                <variable>ResourceList</variable>
                <variable>TechnicalInfo</variable>
                <variable>ContractorNames</variable>
            </startingVariables>
            <ProcessManagerScript type="Complete">
                <variable>TaskName</variable>
                <variable>Provisioning_Data</variable>
            </ProcessManagerScript>
            <ProcessManagerScript type="Initiate">
                <variable>TaskName</variable>
                <variable>Provisioning_Data</variable>
            </ProcessManagerScript>
        </task>
        <task name="GetResources">
            <ProcessManagerScript type="Complete">
                <variable>ResourceList</variable>
                <variable>FetchResourceListOutput</variable>
            </ProcessManagerScript>
        </task>
        <task name="ScriptTask">
            <startingVariables>
                <variable>SystemParamRef</variable>
                <variable>EscalationEmail</variable>
                <variable>CtrMobileTaskDecision</variable>
                <variable>CommentDataSet</variable>
                <variable>TaskName</variable>
                <variable>CommentHistory</variable>
                <variable>Provisioning_Data</variable>
            </startingVariables>
            <ProcessManagerScript type="Complete">
                <variable>Provisioning_Data</variable>
            </ProcessManagerScript>
            <ProcessManagerScript type="Initiate">
                <variable>Provisioning_Data</variable>
            </ProcessManagerScript>
        </task>
        <task name="ServiceTask">
            <startingVariables>
                <variable>commentDataCase</variable>
                <variable>commentDataCaseRef</variable>
            </startingVariables>
            <ProcessManagerScript type="Initiate">
                <variable>CommentText</variable>
                <variable>commentDataCase</variable>
                <variable>TaskName</variable>
                <variable>Provisioning_Data</variable>
            </ProcessManagerScript>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="SFC_FOS_BPM.wsdl" namespace="http://xmlns.example.com/1513751864707"/>
    <bpws:partnerLinks>
        <bpws:partnerLink name="PortTypeEndpoint0_Consumer"
            partnerLinkType="ns:PortType_PLT" partnerRole="PortTypeProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="Provisioning_Data"
            tibex:class="com.sfc.fosImpl.dataModel.ProvisioningDataModel"
            tibex:parameter="inout" tibex:xpdlId="_lj7GkN_EEeec4K-r6PSjHg"/>
        <bpws:variable name="TechnicalInfo"
            tibex:class="com.sfc.fosImpl.dataModel.TechnicalInformation"
            tibex:parameter="inout" tibex:xpdlId="_B5SCMOOtEeeI1KWnGZEQgA"/>
        <bpws:variable name="TaskName" tibex:parameter="inout"
            tibex:xpdlId="_yiVywOO_EeeYfI0_sV0YAA" type="xsd:string"/>
        <bpws:variable name="Mail" tibex:parameter="inout"
            tibex:xpdlId="_RHxX4OYZEeep9dkvO_z3LA" type="xsd:string"/>
        <bpws:variable name="GroupNames" tibex:array="yes"
            tibex:parameter="inout"
            tibex:xpdlId="_Ni4kEPEKEee5fIpJptHEZA" type="xsd:string"/>
        <bpws:variable name="SelectedGroup" tibex:parameter="inout"
            tibex:xpdlId="_8EQNMPENEeeJiLkPq4yokA" type="xsd:string"/>
        <bpws:variable name="SelectedContractor" tibex:parameter="inout"
            tibex:xpdlId="_5uqrgPExEeeMCZGsP3rsrw" type="xsd:string"/>
        <bpws:variable name="ContractorNames" tibex:array="yes"
            tibex:parameter="inout"
            tibex:xpdlId="_oC8T0PE1EeeMCZGsP3rsrw" type="xsd:string"/>
        <bpws:variable name="CommentHistory" tibex:array="yes"
            tibex:class="com.sfc.fosImpl.dataModel.CommentData"
            tibex:parameter="inout" tibex:xpdlId="_-MbHoPRPEeeMCZGsP3rsrw"/>
        <bpws:variable name="CommentText" tibex:parameter="inout"
            tibex:xpdlId="_cbofIPR6Eeez78ayMGlX3w" type="xsd:string"/>
        <bpws:variable name="EscalationEmail" tibex:parameter="inout"
            tibex:xpdlId="_CNJI0PUFEeeywP4RjejZPQ" type="xsd:string"/>
        <bpws:variable name="commentDataCase"
            tibex:class="com.sfc.fosImpl.dataModel.CommentDataCase"
            tibex:parameter="inout" tibex:xpdlId="_ZJBQwPacEee_OvMSeNQu6A"/>
        <bpws:variable name="CommentDataSet" tibex:array="yes"
            tibex:classRef="com.sfc.fosImpl.dataModel.CommentDataCase"
            tibex:parameter="inout" tibex:xpdlId="_mN798PavEeeVceMtR_75Ng"/>
        <bpws:variable name="commentDataCaseRef"
            tibex:classRef="com.sfc.fosImpl.dataModel.CommentDataCase"
            tibex:parameter="inout" tibex:xpdlId="_kf1YAfacEee_OvMSeNQu6A"/>
        <bpws:variable name="SelectedPM" tibex:parameter="inout"
            tibex:xpdlId="_ZLtykBB-EeiTfu82n897bg" type="xsd:string"/>
        <bpws:variable name="AccountType" tibex:array="yes"
            tibex:xpdlId="_PNS9kPt1EeeupNwu8S8N4Q" type="xsd:string"/>
        <bpws:variable name="AccountEntries"
            tibex:classRef="com.sfc.fosImpl.dataModel.LookupTable" tibex:xpdlId="_ej8-gft1EeeupNwu8S8N4Q"/>
        <bpws:variable name="SystemParamRef"
            tibex:classRef="com.sfc.fosImpl.dataModel.SystemParameters" tibex:xpdlId="_Sc-sEAlfEeiPXa3e9UY2HA"/>
        <bpws:variable name="CtrMobileTaskDecision"
            tibex:xpdlId="_ZwCC8AlfEeiPXa3e9UY2HA" type="xsd:boolean"/>
        <bpws:variable name="FetchResourceListOutput"
            tibex:class="com.tibco.schemas.SFC_FOS_BPM.SharedResources.SchemaDefinitions.Schema.fetchresourceoutputType" tibex:xpdlId="_W5DeUBB8EeiZiLgDoQc00Q"/>
        <bpws:variable name="ResourceList" tibex:array="yes"
            tibex:xpdlId="_mQVxYBB8EeiZiLgDoQc00Q" type="xsd:string"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_k7l1MBGeEei-p-L5yAjJ1Q">
        <bpws:links>
            <bpws:link name="ConfirmDetails to ServiceTask" tibex:xpdlId="_GAPJYPaZEee_OvMSeNQu6A"/>
            <bpws:link name="ServiceTask to EndEvent" tibex:xpdlId="_Cpfco9_HEeec4K-r6PSjHg"/>
            <bpws:link name="ScriptTask to _roZQoBB7EeiZiLgDoQc00Q" tibex:xpdlId="_roZQoRB7EeiZiLgDoQc00Q"/>
            <bpws:link name="ContractorMobileTask to ServiceTask" tibex:xpdlId="_7p1uoAliEeiPXa3e9UY2HA"/>
            <bpws:link name="_iwMb4AlfEeiPXa3e9UY2HA to ConfirmDetails" tibex:xpdlId="_5nGy8N_CEeec4K-r6PSjHg"/>
            <bpws:link
                name="_iwMb4AlfEeiPXa3e9UY2HA to ContractorMobileTask" tibex:xpdlId="_joofwAlfEeiPXa3e9UY2HA"/>
            <bpws:link
                name="_roZQoBB7EeiZiLgDoQc00Q to _iwMb4AlfEeiPXa3e9UY2HA" tibex:xpdlId="_iwMb4QlfEeiPXa3e9UY2HA"/>
            <bpws:link name="_roZQoBB7EeiZiLgDoQc00Q to GetResources" tibex:xpdlId="_tbZfUBB7EeiZiLgDoQc00Q"/>
            <bpws:link name="GetResources to _iwMb4AlfEeiPXa3e9UY2HA" tibex:xpdlId="_u3-yEBB7EeiZiLgDoQc00Q"/>
            <bpws:link name="StartEvent to ScriptTask" tibex:xpdlId="_O0-jIfdiEeeVceMtR_75Ng"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_tHTqYt_CEeec4K-r6PSjHg" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to ScriptTask"/>
                </bpws:sources>
                <tibex:parameters>
                    <parameterDescription mode="InOut" name="CommentText"/>
                    <parameterDescription mode="InOut" name="EscalationEmail"/>
                    <parameterDescription mode="InOut" name="SelectedContractor"/>
                    <parameterDescription mode="InOut" name="SelectedGroup"/>
                    <parameterDescription mode="InOut" name="TaskName"/>
                    <parameterDescription mode="InOut" name="GroupNames"/>
                    <parameterDescription mode="InOut" name="Provisioning_Data"/>
                    <parameterDescription mode="InOut" name="CommentHistory"/>
                    <parameterDescription mode="InOut" name="TechnicalInfo"/>
                    <parameterDescription mode="InOut" name="SelectedPM"/>
                    <parameterDescription mode="InOut" name="CommentDataSet"/>
                    <parameterDescription mode="InOut" name="commentDataCase"/>
                    <parameterDescription mode="InOut" name="Mail"/>
                    <parameterDescription mode="InOut" name="commentDataCaseRef"/>
                    <parameterDescription mode="InOut" name="ContractorNames"/>
                </tibex:parameters>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:type="endEvent" tibex:xpdlId="_tHTqY9_CEeec4K-r6PSjHg">
            <bpws:targets>
                <bpws:target linkName="ServiceTask to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="ConfirmDetails"
                tibex:extendedAttributes="bpmJspTask=form\://comsfcfosImplremoval_tobe_pageflow/comsfcfosImplremoval_tobe_pageflowProcess/ConfirmDetails/GatekeeperApproval.form&#xd;&#xa;"
                tibex:type="userTask"
                tibex:xpdlId="_7fQnYN_CEeec4K-r6PSjHg" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_iwMb4AlfEeiPXa3e9UY2HA to ConfirmDetails"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ConfirmDetails to ServiceTask"/>
                </bpws:sources>
                <model:PageActivityDataModelType xmi:version="2.0"
                    xmlns:model="http://model.pageactivity.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <pageActivityParameters>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="Provisioning_Data"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TechnicalInfo"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TaskName"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="GroupNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedGroup"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedContractor"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="ContractorNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentText"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentHistory"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="ResourceList"/>
                    </pageActivityParameters>
                </model:PageActivityDataModelType>
                <tibex:completedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var Log_Activity_Name=TaskName;
var Log_Activity_Type="End";
var Log_Activity_Resource="USER";
Log.write("[SFC_FOS_IMPL] SIEBEL_CIRCUIT_ID="+Provisioning_Data.siebelCircuitID+",CLIENT_NAME="+Provisioning_Data.clientName+",PVM_ID="+Process.getId()+",PROCESS_NAME="+Process.getName()+",ACTIVITY_NAME="+Log_Activity_Name+",ACTIVITY_TYPE="+Log_Activity_Type+",ACTIVITY_RESOURCE="+Log_Activity_Resource+",END_TIME="+DateTimeUtil.createDatetime()+",");]]></tibex:completedScript>
                <tibex:initiatedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var Log_Activity_Name=TaskName;
var Log_Activity_Type="Start";
var Log_Activity_Resource="USER";
Log.write("[SFC_FOS_IMPL] SIEBEL_CIRCUIT_ID="+Provisioning_Data.siebelCircuitID+",CLIENT_NAME="+Provisioning_Data.clientName+",PVM_ID="+Process.getId()+",PROCESS_NAME="+Process.getName()+",ACTIVITY_NAME="+Log_Activity_Name+",ACTIVITY_TYPE="+Log_Activity_Type+",ACTIVITY_RESOURCE="+Log_Activity_Resource+",BEGIN_TIME="+DateTimeUtil.createDatetime()+",");]]></tibex:initiatedScript>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ServiceTask"
                tibex:type="serviceTask"
                tibex:xpdlId="_GAOiUPaZEee_OvMSeNQu6A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="ConfirmDetails to ServiceTask"/>
                    <bpws:target linkName="ContractorMobileTask to ServiceTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ServiceTask to EndEvent"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[commentDataCaseRef = cac_com_sfc_fosImpl_dataModel_CommentDataCase.create(commentDataCase);]]></tibex:script>
                <tibex:initiatedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[/*var size=CommentHistory.size();
commentDataCase.addedby=CommentHistory.get(size).addedby;
commentDataCase.comments=CommentHistory.get(size).comments;
commentDataCase.taskName=CommentHistory.get(size).stepName;
commentDataCase.time=CommentHistory.get(size).time;
*/
commentDataCase=com_sfc_fosImpl_dataModel_Factory.createCommentDataCase();
commentDataCase.addedby=Process.getOriginatorName();
commentDataCase.comments=CommentText;
for(var index=0; index<TaskName.length; index++) {
	var name=TaskName.replace("_"," ");
}
commentDataCase.taskName=name;
commentDataCase.time=DateTimeUtil.createDatetime();
commentDataCase.siebelCircuitID=Provisioning_Data.siebelCircuitID;

Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.addedby);
Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.comments);
Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.siebelCircuitID);
Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.taskName);]]></tibex:initiatedScript>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptTask" tibex:type="scriptTask"
                tibex:xpdlId="_O0-jIPdiEeeVceMtR_75Ng" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartEvent to ScriptTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ScriptTask to _roZQoBB7EeiZiLgDoQc00Q"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[CtrMobileTaskDecision=false;

var criteria = "siebelCircuitID='"+Provisioning_Data.siebelCircuitID+"'";
CommentDataSet=cac_com_sfc_fosImpl_dataModel_CommentDataCase.findByCriteria(criteria);

CommentHistory.clear();
if(CommentDataSet.size()>0){
	for(var index=0; index<CommentDataSet.size(); index++) {
		var comment=com_sfc_fosImpl_dataModel_Factory.createCommentData();
		comment.addedby=CommentDataSet.get(index).readCommentDataCase().addedby;
		comment.comments=CommentDataSet.get(index).readCommentDataCase().comments;
		comment.stepName=CommentDataSet.get(index).readCommentDataCase().taskName;
		comment.time=CommentDataSet.get(index).readCommentDataCase().time;
		CommentHistory.add(comment);	
	}
}
var criteria = "enableFlag='Y' AND lookupKey='ACCOUNT_TYPE'";

if(TaskName=="PM_Review"){
var a=Process.getOriginatorName();
EscalationEmail=Process.getOrgModel().resourceByName(a).get(0).getAttributeValue("Email").get(0);

}

if(TaskName=="Manual_Installation_Removal") {
	SystemParamRef= cac_com_sfc_fosImpl_dataModel_SystemParameters.findByPropertyName("Contractor_Mobile_Task_Flag");
	if(SystemParamRef.readSystemParameters().propertyValue=="Enable") {
		CtrMobileTaskDecision = true;
	}
	else {
		CtrMobileTaskDecision=false;
	}
	
}]]></tibex:script>
                <tibex:completedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var Log_Activity_Name="Script Task";
var Log_Activity_Type="End";
var Log_Activity_Resource="SYSTEM";
Log.write("[SFC_FOS_IMPL] SIEBEL_CIRCUIT_ID="+Provisioning_Data.siebelCircuitID+",CLIENT_NAME="+Provisioning_Data.clientName+",PVM_ID="+Process.getId()+",PROCESS_NAME="+Process.getName()+",ACTIVITY_NAME="+Log_Activity_Name+",ACTIVITY_TYPE="+Log_Activity_Type+",ACTIVITY_RESOURCE="+Log_Activity_Resource+",END_TIME="+DateTimeUtil.createDatetime()+",");
]]></tibex:completedScript>
                <tibex:initiatedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var Log_Activity_Name="Script Task";
var Log_Activity_Type="Start";
var Log_Activity_Resource="SYSTEM";
Log.write("[SFC_FOS_IMPL] SIEBEL_CIRCUIT_ID="+Provisioning_Data.siebelCircuitID+",CLIENT_NAME="+Provisioning_Data.clientName+",PVM_ID="+Process.getId()+",PROCESS_NAME="+Process.getName()+",ACTIVITY_NAME="+Log_Activity_Name+",ACTIVITY_TYPE="+Log_Activity_Type+",ACTIVITY_RESOURCE="+Log_Activity_Resource+",BEGIN_TIME="+DateTimeUtil.createDatetime()+",");]]></tibex:initiatedScript>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ContractorMobileTask"
                tibex:extendedAttributes="bpmJspTask=form\://comsfcfosImplremoval_tobe_pageflow/comsfcfosImplremoval_tobe_pageflowProcess/Contractor/ManualInstallation_Remote.form&#xd;&#xa;"
                tibex:type="userTask"
                tibex:xpdlId="_gfp8oAlfEeiPXa3e9UY2HA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_iwMb4AlfEeiPXa3e9UY2HA to ContractorMobileTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ContractorMobileTask to ServiceTask"/>
                </bpws:sources>
                <model:PageActivityDataModelType xmi:version="2.0"
                    xmlns:model="http://model.pageactivity.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <pageActivityParameters>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TechnicalInfo"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedContractor"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TaskName"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentHistory"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedGroup"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="GroupNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="Provisioning_Data"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="ContractorNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentText"/>
                    </pageActivityParameters>
                </model:PageActivityDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:empty name="_BX_gateway__iwMb4AlfEeiPXa3e9UY2HA"
            tibex:type="exclusiveGateway" tibex:xpdlId="_iwMb4AlfEeiPXa3e9UY2HA">
            <bpws:targets>
                <bpws:target linkName="_roZQoBB7EeiZiLgDoQc00Q to _iwMb4AlfEeiPXa3e9UY2HA"/>
                <bpws:target linkName="GetResources to _iwMb4AlfEeiPXa3e9UY2HA"/>
            </bpws:targets>
            <bpws:sources tibex:maxTrue="1">
                <bpws:source linkName="_iwMb4AlfEeiPXa3e9UY2HA to ConfirmDetails">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[##otherwise##]]></bpws:transitionCondition>
                </bpws:source>
                <bpws:source linkName="_iwMb4AlfEeiPXa3e9UY2HA to ContractorMobileTask">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[(CtrMobileTaskDecision==true);]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
        </bpws:empty>
        <bpws:empty name="_BX_gateway__roZQoBB7EeiZiLgDoQc00Q"
            tibex:type="exclusiveGateway" tibex:xpdlId="_roZQoBB7EeiZiLgDoQc00Q">
            <bpws:targets>
                <bpws:target linkName="ScriptTask to _roZQoBB7EeiZiLgDoQc00Q"/>
            </bpws:targets>
            <bpws:sources tibex:maxTrue="1">
                <bpws:source linkName="_roZQoBB7EeiZiLgDoQc00Q to _iwMb4AlfEeiPXa3e9UY2HA">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[##otherwise##]]></bpws:transitionCondition>
                </bpws:source>
                <bpws:source linkName="_roZQoBB7EeiZiLgDoQc00Q to GetResources">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[TaskName=="GateKeeper";]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
        </bpws:empty>
        <bpws:scope name="GetResources" tibex:type="serviceTask" tibex:xpdlId="_so32MBB7EeiZiLgDoQc00Q">
            <tibex:completedScript
                expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"><![CDATA[for(var i=0;i<FetchResourceListOutput.resource.size();i++) {
	ResourceList.add(FetchResourceListOutput.resource.get(i).name);
}
]]></tibex:completedScript>
            <bpws:targets>
                <bpws:target linkName="_roZQoBB7EeiZiLgDoQc00Q to GetResources"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="GetResources to _iwMb4AlfEeiPXa3e9UY2HA"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable messageType="ns:FetchResourceinput" name="v_b5821002"/>
                <bpws:variable messageType="ns:FetchResourceoutput" name="v_56167c9"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence">
                <bpws:scope name="_BX_ToSvcDataMapping">
                    <bpws:variables>
                        <bpws:variable name="MESSAGE_fetchresourceinput" tibex:class="com.tibco.schemas.SFC_FOS_BPM.SharedResources.SchemaDefinitions.Schema.fetchresourceinputType"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_2">
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Create target 'fetchresourceinput' if it doesn't exist.
if (MESSAGE_fetchresourceinput == null) {
    MESSAGE_fetchresourceinput = com_tibco_schemas_SFC_FOS_BPM_SharedResources_SchemaDefinitions_Schema_Factory.createfetchresourceinputType();
}

// Map from 'PMScript' to 'fetchresourceinput.processname'

// Function for user defined mapping script: PMScript
function _f1_() { 
    return "PM";
}
MESSAGE_fetchresourceinput.processname = _f1_();


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                        <bpws:assign name="_BX_assign_3" validate="no">
                            <bpws:copy
                                tibex:elementName="{http://www.tibco.com/schemas/SFC_FOS_BPM/SharedResources/SchemaDefinitions/Schema.xsd}fetchresourceinput" tibex:transform="ObjectToXml">
                                <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[MESSAGE_fetchresourceinput]]></bpws:from>
                                <bpws:to part="fetchresourceinput" variable="v_b5821002"/>
                            </bpws:copy>
                        </bpws:assign>
                    </bpws:sequence>
                </bpws:scope>
                <bpws:invoke inputVariable="v_b5821002"
                    name="_BX_invoke" operation="getResources"
                    outputVariable="v_56167c9"
                    partnerLink="PortTypeEndpoint0_Consumer" portType="ns:PortType"/>
                <bpws:scope name="_BX_FromSvcDataMapping">
                    <bpws:variables>
                        <bpws:variable
                            name="MESSAGE_fetchresourceoutput" tibex:class="com.tibco.schemas.SFC_FOS_BPM.SharedResources.SchemaDefinitions.Schema.fetchresourceoutputType"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_3">
                        <bpws:assign name="_BX_assign_4" validate="no">
                            <bpws:copy
                                tibex:objectNamespace="http://www.tibco.com/schemas/SFC_FOS_BPM/SharedResources/SchemaDefinitions/Schema.xsd" tibex:transform="XmlToObject">
                                <bpws:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$v_56167c9.fetchresourceoutput]]></bpws:from>
                                <bpws:to variable="MESSAGE_fetchresourceoutput"/>
                            </bpws:copy>
                        </bpws:assign>
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript_2" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'fetchresourceoutput' to 'FetchResourceListOutput'
FetchResourceListOutput = ScriptUtil.copy(MESSAGE_fetchresourceoutput);


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                    </bpws:sequence>
                </bpws:scope>
            </bpws:sequence>
        </bpws:scope>
    </bpws:flow>
</bpws:process>
