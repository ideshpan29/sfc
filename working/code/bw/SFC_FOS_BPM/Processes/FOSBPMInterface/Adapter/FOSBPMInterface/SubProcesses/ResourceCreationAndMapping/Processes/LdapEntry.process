<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:pfx6="http://www.tibco.com/ns/no_namespace_schema_location/SharedResources/mapResource.xsd" xmlns:pfx7="http://www.tibco.com/ns/no_namespace_schema_location/SharedResources/mapresource1.xsd" xmlns:pfx8="http://www.tibco.com/schemas/ResourceCreationAndMapping/ResourceCreationSchema/Schema.xsd" xmlns:pfx="http://www.tibco.com/pe/WriteToLogActivitySchema" xmlns:pfx9="http://www.tibco.com/schemas/ResourceCreationAndMapping/ResourceCreationSchema/Schema.xsd2" xmlns:pfx2="http://www.tibco.com/schemas/UserOnboard/SharedResources/Schema.xsd" xmlns:ns="www.tibco.com/plugin/java/JavaMethodActivityInput" xmlns:pfx3="http://www.tibco.com/schemas/UserOnboard/SharedResources/Schema1.xsd" xmlns:pfx4="http://www.tibco.com/ns/no_namespace_schema_location/SharedResources/createResource.xsd" xmlns:pfx5="http://www.tibco.com/namespaces/tnt/plugins/json" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns2="http://xmlns.tibco.com/bw/activity/xml/render/bytesEnvelope/2003/05" xmlns:ns1="http://www.tibco.com/pe/DeployedVarsType" xmlns:ns4="http://www.tibco.com/schemas/ResourceCreationAndMapping/Schemas/Schema.xsd" xmlns:ns3="www.tibco.com/plugin/Sleep" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns5="http://www.tibco.com/namespaces/tnt/plugins/file" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:pfx11="http://www.tibco.com/schemas/SFC_FOS_BPM/Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreation/Schemas/Schema.xsd" xmlns:pfx12="http://www.tibco.com/schemas/SFC_FOS_BPM/Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreationAndMapping/Schemas/Schema4.xsd" xmlns:pfx10="http://www.tibco.com/schemas/OnboardingProjectBW/ResourceCreationSchema/Schema.xsd" xmlns:pfx13="http://www.tibco.com/schemas/SFC_FOS_BPM/SharedResources/SchemaDefinitions/Schema.xsd">
    <xsd:import namespace="http://www.tibco.com/schemas/UserOnboard/SharedResources/Schema.xsd" schemaLocation="/SharedResources/inputSchema.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/UserOnboard/SharedResources/Schema1.xsd" schemaLocation="/SharedResources/outputSchema.xsd"/>
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/SharedResources/createResource.xsd" schemaLocation="/SharedResources/createResource.xsd"/>
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/SharedResources/mapResource.xsd" schemaLocation="/SharedResources/mapResource.xsd"/>
    <xsd:import namespace="http://www.tibco.com/ns/no_namespace_schema_location/SharedResources/mapresource1.xsd" schemaLocation="/SharedResources/mapresource1.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/ResourceCreationAndMapping/ResourceCreationSchema/Schema.xsd" schemaLocation="/ResourceCreationSchema/inputSchema.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/ResourceCreationAndMapping/ResourceCreationSchema/Schema.xsd2" schemaLocation="/ResourceCreationSchema/outputSchema.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/OnboardingProjectBW/ResourceCreationSchema/Schema.xsd" schemaLocation="/ResourceCreationSchema/LdapEntrySchema.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/SFC_FOS_BPM/Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreation/Schemas/Schema.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/SFC_FOS_BPM/Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreationAndMapping/Schemas/Schema4.xsd"/>
    <xsd:import namespace="http://www.tibco.com/schemas/SFC_FOS_BPM/SharedResources/SchemaDefinitions/Schema.xsd" schemaLocation="/SharedResources/SchemaDefinitions/sfcfosbpmschema.xsd"/>
    <pd:name>Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreationAndMapping/Processes/LdapEntry.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType ref="pfx13:ldapentryinput"/>
    <pd:startX>59</pd:startX>
    <pd:startY>34</pd:startY>
    <pd:returnBindings>
        <pfx13:createresourceoutput>
            <pfx13:outputmessage>
                <xsl:value-of select="$Call-Resource-Mapping-Process/pfx13:createresourceoutput/pfx13:outputmessage"/>
            </pfx13:outputmessage>
        </pfx13:createresourceoutput>
    </pd:returnBindings>
    <pd:endName>End</pd:endName>
    <pd:endType ref="pfx13:createresourceoutput"/>
    <pd:endX>775</pd:endX>
    <pd:endY>34</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables/>
    <pd:targetNamespace>http://xmlns.example.com/1509441068367</pd:targetNamespace>
    <pd:activity name="Call Resource Mapping Process">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>635</pd:x>
        <pd:y>43</pd:y>
        <config>
            <processName>/Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreationAndMapping/Processes/createResource.process</processName>
        </config>
        <pd:inputBindings>
            <pfx13:createresourceinput>
                <pfx13:createresourcerequest>
                    <pfx13:name>
                        <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:orgmodelname"/>
                    </pfx13:name>
                    <pfx13:orgname>
                        <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:orgmodelname"/>
                    </pfx13:orgname>
                    <pfx13:flag>
                        <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:flag"/>
                    </pfx13:flag>
                    <pfx13:entityname>
                        <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:entity"/>
                    </pfx13:entityname>
                    <pfx13:email>
                        <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:email"/>
                    </pfx13:email>
                    <pfx13:password>
                        <xsl:value-of select="generate-id($Start/pfx13:ldapentryinput)"/>
                    </pfx13:password>
                    <xsl:if test="$Start/pfx13:ldapentryinput/pfx13:addby">
                        <pfx13:addby>
                            <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:addby"/>
                        </pfx13:addby>
                    </xsl:if>
                </pfx13:createresourcerequest>
            </pfx13:createresourceinput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Failure LDAP Entry Log">
        <pd:type>com.tibco.plugin.file.FileWriteActivity</pd:type>
        <pd:resourceType>ae.activities.FileWriteActivity</pd:resourceType>
        <pd:x>450</pd:x>
        <pd:y>325</pd:y>
        <config>
            <encoding>text</encoding>
            <compressFile>None</compressFile>
            <append>true</append>
        </config>
        <pd:inputBindings>
            <ns5:WriteActivityInputTextClass>
                <fileName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/FileNames/LogFile"/>
                </fileName>
                <textContent>
                    <xsl:value-of select="concat($Start/pfx13:ldapentryinput/pfx13:firstname,&quot;******LDAP Entry Not Created*****&quot;)"/>
                </textContent>
                <addLineSeparator>
                    <xsl:value-of select="1"/>
                </addLineSeparator>
            </ns5:WriteActivityInputTextClass>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Ldap Entry Code">
        <pd:type>com.tibco.plugin.java.JavaActivity</pd:type>
        <pd:resourceType>ae.javapalette.javaActivity</pd:resourceType>
        <pd:x>212</pd:x>
        <pd:y>57</pd:y>
        <config>
            <javaArchive>/Processes/FOSBPMInterface/Adapter/FOSBPMInterface/SubProcesses/ResourceCreationAndMapping/SharedResources/AliasLibrary.aliaslib</javaArchive>
            <fileName>LdapEntryLdapEntryCode</fileName>
            <packageName>Processes.FOSBPMInterface.Adapter.FOSBPMInterface.SubProcesses.ResourceCreationAndMapping.Processes.LdapEntry</packageName>
            <fullsource>package Processes.FOSBPMInterface.Adapter.FOSBPMInterface.SubProcesses.ResourceCreationAndMapping.Processes.LdapEntry;
import java.util.*;
import java.io.*;
import java.io.IOException;
import org.apache.directory.api.ldap.model.cursor.CursorException;
import org.apache.directory.api.ldap.model.cursor.EntryCursor;
import org.apache.directory.api.ldap.model.cursor.SearchCursor;
import org.apache.directory.api.ldap.model.entry.DefaultEntry;
import org.apache.directory.api.ldap.model.entry.Entry;
import org.apache.directory.api.ldap.model.exception.LdapException;
import org.apache.directory.api.ldap.model.exception.LdapInvalidDnException;
import org.apache.directory.api.ldap.model.message.AddRequest;
import org.apache.directory.api.ldap.model.message.AddRequestImpl;
import org.apache.directory.api.ldap.model.message.AddResponse;
import org.apache.directory.api.ldap.model.message.Response;
import org.apache.directory.api.ldap.model.message.ResultCodeEnum;
import org.apache.directory.api.ldap.model.message.SearchRequest;
import org.apache.directory.api.ldap.model.message.SearchRequestImpl;
import org.apache.directory.api.ldap.model.message.SearchResultEntry;
import org.apache.directory.api.ldap.model.message.SearchScope;
import org.apache.directory.api.ldap.model.message.controls.ManageDsaITImpl;
import org.apache.directory.api.ldap.model.name.Dn;
import org.apache.directory.ldap.client.api.LdapConnection;
import org.apache.directory.ldap.client.api.LdapConnectionConfig;
import org.apache.directory.ldap.client.api.LdapNetworkConnection;
import org.apache.directory.api.ldap.model.exception.*;
import org.apache.log4j.*;

public class LdapEntryLdapEntryCode{
/****** START SET/GET METHOD, DO NOT MODIFY *****/
	protected String Name = "";
	protected String mail = "";
	protected String password = "";
	protected String LDapHostName = "";
	protected String LDapUserName = "";
	protected String LDapPassword = "";
	protected String LDapPartitionName = "";
	protected String resourceCreationDN = "";
	protected String SucessoutputMessage = "";
	protected String FailureOutputMessage = "";
	protected String LDapPort = "";
	protected String outputMessage = "";
	public String getName() {
		return Name;
	}
	public void setName(String val) {
		Name = val;
	}
	public String getmail() {
		return mail;
	}
	public void setmail(String val) {
		mail = val;
	}
	public String getpassword() {
		return password;
	}
	public void setpassword(String val) {
		password = val;
	}
	public String getLDapHostName() {
		return LDapHostName;
	}
	public void setLDapHostName(String val) {
		LDapHostName = val;
	}
	public String getLDapUserName() {
		return LDapUserName;
	}
	public void setLDapUserName(String val) {
		LDapUserName = val;
	}
	public String getLDapPassword() {
		return LDapPassword;
	}
	public void setLDapPassword(String val) {
		LDapPassword = val;
	}
	public String getLDapPartitionName() {
		return LDapPartitionName;
	}
	public void setLDapPartitionName(String val) {
		LDapPartitionName = val;
	}
	public String getresourceCreationDN() {
		return resourceCreationDN;
	}
	public void setresourceCreationDN(String val) {
		resourceCreationDN = val;
	}
	public String getSucessoutputMessage() {
		return SucessoutputMessage;
	}
	public void setSucessoutputMessage(String val) {
		SucessoutputMessage = val;
	}
	public String getFailureOutputMessage() {
		return FailureOutputMessage;
	}
	public void setFailureOutputMessage(String val) {
		FailureOutputMessage = val;
	}
	public String getLDapPort() {
		return LDapPort;
	}
	public void setLDapPort(String val) {
		LDapPort = val;
	}
	public String getoutputMessage() {
		return outputMessage;
	}
	public void setoutputMessage(String val) {
		outputMessage = val;
	}
/****** END SET/GET METHOD, DO NOT MODIFY *****/
	public LdapEntryLdapEntryCode() {
	}
	public void invoke() throws Exception {
/* Available Variables: DO NOT MODIFY
	In  : String Name
	In  : String mail
	In  : String password
	In  : String LDapHostName
	In  : String LDapUserName
	In  : String LDapPassword
	In  : String LDapPartitionName
	In  : String resourceCreationDN
	In  : String SucessoutputMessage
	In  : String FailureOutputMessage
	In  : String LDapPort
	Out : String outputMessage
* Available Variables: DO NOT MODIFY *****/

LdapConnection conn=new LdapNetworkConnection(getLDapHostName(),getLDapPort());
		try {
			conn.bind(getLDapUserName(),getLDapPassword());
		} catch (Exception e) {
			e.printStackTrace();
		}
		SearchRequest req = new SearchRequestImpl();
	    req.setScope( SearchScope.SUBTREE );
	    req.addAttributes( "*" );
	    req.setTimeLimit( 0 );
	    try {
			req.setBase( new Dn( getLDapPartitionName() ) );
		} catch (LdapInvalidDnException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
	    try {
			req.setFilter( "(mail="+getmail()+")" );
		} catch (LdapException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	    // Process the request
	    SearchCursor searchCursor;
		try {
			searchCursor = conn.search( req );
			try {
				while ( searchCursor.next() )
				{
				    Response response = searchCursor.get();

				    // process the SearchResultEntry
				    if ( response instanceof SearchResultEntry )
				    {	
					//flag=1;
					
				        Entry resultEntry = ( ( SearchResultEntry ) response ).getEntry();
				        //System.out.println( flag );
				    }
				}
			} catch (CursorException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		} catch (LdapException e) {;
			// TODO Auto-generated catch block
			e.printStackTrace();
		} 
		//if(flag==1){  
		try {
			conn.add(
			        new DefaultEntry(
			            "OU="+getName()+","+getresourceCreationDN(), // The Dn
			            "ObjectClass:inetOrgPerson",
			            "ObjectClass:person ",
			            "ObjectClass: top",
			            "cn: "+getName(),
			            "sn: "+getName(),
				    "mail: "+getmail(),
				    "userpassword: "+getpassword()
			            ) );
					setoutputMessage(getSucessoutputMessage());
		} catch (LdapEntryAlreadyExistsException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			setoutputMessage(getFailureOutputMessage());
		}

}
}
</fullsource>
            <outputData>
                <row>
                    <fieldName>outputMessage</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </outputData>
            <inputData>
                <row>
                    <fieldName>Name</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>mail</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>password</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>LDapHostName</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>LDapUserName</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>LDapPassword</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>LDapPartitionName</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>resourceCreationDN</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>SucessoutputMessage</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>FailureOutputMessage</fieldName>
                    <fieldType>string</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
                <row>
                    <fieldName>LDapPort</fieldName>
                    <fieldType>int</fieldType>
                    <fieldRequired>optional</fieldRequired>
                </row>
            </inputData>
            <byteCode>
                <class>
                    <name>LdapEntryLdapEntryCode</name>
                    <byteCode>yv66vgAAADQA+AkATQCKCQBNAIsJAE0AjAkATQCNCQBNAI4JAE0AjwkATQCQCQBNAJEJAE0AkgkATQCTCQBNAJQJAE0AlQoAPQCWCACXBwCYCgBNAJkKAE0AmgoADwCbCgBNAJwKAE0AnQsAngCfBwCgCgAWAKEHAKIKABgAlgkAowCkCwClAKYHAKcIAKgLAKUAqQsApQCqBwCrCgBNAKwKACAArQsApQCuBwCvCgAkAKEHALAKACYAlggAsQoAJgCyCgBNALMIALQKACYAtQsApQC2BwC3CgAuAKELAJ4AuAsAuQC6CwC5ALsHALwHAL0LADQAvgcAvwoANgChBwDACADBCgBNAMIIAMMKAE0AxAcAxQgAxggAxwgAyAgAyQgAyggAywgAzAoATQDNCgA4AM4LAJ4AzwoATQDQCgBNANEHANIKAEoAoQoATQDTBwDUAQAETmFtZQEAEkxqYXZhL2xhbmcvU3RyaW5nOwEABG1haWwBAAhwYXNzd29yZAEADExEYXBIb3N0TmFtZQEADExEYXBVc2VyTmFtZQEADExEYXBQYXNzd29yZAEAEUxEYXBQYXJ0aXRpb25OYW1lAQAScmVzb3VyY2VDcmVhdGlvbkROAQATU3VjZXNzb3V0cHV0TWVzc2FnZQEAFEZhaWx1cmVPdXRwdXRNZXNzYWdlAQAITERhcFBvcnQBAAFJAQANb3V0cHV0TWVzc2FnZQEAB2dldE5hbWUBABQoKUxqYXZhL2xhbmcvU3RyaW5nOwEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBAAdzZXROYW1lAQAVKExqYXZhL2xhbmcvU3RyaW5nOylWAQAHZ2V0bWFpbAEAB3NldG1haWwBAAtnZXRwYXNzd29yZAEAC3NldHBhc3N3b3JkAQAPZ2V0TERhcEhvc3ROYW1lAQAPc2V0TERhcEhvc3ROYW1lAQAPZ2V0TERhcFVzZXJOYW1lAQAPc2V0TERhcFVzZXJOYW1lAQAPZ2V0TERhcFBhc3N3b3JkAQAPc2V0TERhcFBhc3N3b3JkAQAUZ2V0TERhcFBhcnRpdGlvbk5hbWUBABRzZXRMRGFwUGFydGl0aW9uTmFtZQEAFWdldHJlc291cmNlQ3JlYXRpb25ETgEAFXNldHJlc291cmNlQ3JlYXRpb25ETgEAFmdldFN1Y2Vzc291dHB1dE1lc3NhZ2UBABZzZXRTdWNlc3NvdXRwdXRNZXNzYWdlAQAXZ2V0RmFpbHVyZU91dHB1dE1lc3NhZ2UBABdzZXRGYWlsdXJlT3V0cHV0TWVzc2FnZQEAC2dldExEYXBQb3J0AQADKClJAQALc2V0TERhcFBvcnQBAAQoSSlWAQAQZ2V0b3V0cHV0TWVzc2FnZQEAEHNldG91dHB1dE1lc3NhZ2UBAAY8aW5pdD4BAAMoKVYBAAZpbnZva2UBAA1TdGFja01hcFRhYmxlBwDUBwDVBwCgBwDWBwCvBwC3BwDXBwC/BwDSAQAKRXhjZXB0aW9ucwEAClNvdXJjZUZpbGUBABtMZGFwRW50cnlMZGFwRW50cnlDb2RlLmphdmEMAE4ATwwAUABPDABRAE8MAFIATwwAUwBPDABUAE8MAFUATwwAVgBPDABXAE8MAFgATwwAWQBaDABbAE8MAHoAewEAAAEAOm9yZy9hcGFjaGUvZGlyZWN0b3J5L2xkYXAvY2xpZW50L2FwaS9MZGFwTmV0d29ya0Nvbm5lY3Rpb24MAGYAXQwAdAB1DAB6ANgMAGgAXQwAagBdBwDVDADZANoBABNqYXZhL2xhbmcvRXhjZXB0aW9uDADbAHsBAD1vcmcvYXBhY2hlL2RpcmVjdG9yeS9hcGkvbGRhcC9tb2RlbC9tZXNzYWdlL1NlYXJjaFJlcXVlc3RJbXBsBwDcDADdAN4HANYMAN8A4AEAEGphdmEvbGFuZy9TdHJpbmcBAAEqDADhAOIMAOMA5AEAK29yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL25hbWUvRG4MAGwAXQwAegDlDADmAOcBAERvcmcvYXBhY2hlL2RpcmVjdG9yeS9hcGkvbGRhcC9tb2RlbC9leGNlcHRpb24vTGRhcEludmFsaWREbkV4Y2VwdGlvbgEAF2phdmEvbGFuZy9TdHJpbmdCdWlsZGVyAQAGKG1haWw9DADoAOkMAGIAXQEAASkMAOoAXQwA6wDsAQA7b3JnL2FwYWNoZS9kaXJlY3RvcnkvYXBpL2xkYXAvbW9kZWwvZXhjZXB0aW9uL0xkYXBFeGNlcHRpb24MAO0A7gcA1wwA7wDwDADxAPIBADRvcmcvYXBhY2hlL2RpcmVjdG9yeS9hcGkvbGRhcC9tb2RlbC9tZXNzYWdlL1Jlc3BvbnNlAQA9b3JnL2FwYWNoZS9kaXJlY3RvcnkvYXBpL2xkYXAvbW9kZWwvbWVzc2FnZS9TZWFyY2hSZXN1bHRFbnRyeQwA8wD0AQA6b3JnL2FwYWNoZS9kaXJlY3RvcnkvYXBpL2xkYXAvbW9kZWwvY3Vyc29yL0N1cnNvckV4Y2VwdGlvbgEANm9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL2VudHJ5L0RlZmF1bHRFbnRyeQEAA09VPQwAXABdAQABLAwAbgBdAQAQamF2YS9sYW5nL09iamVjdAEAGU9iamVjdENsYXNzOmluZXRPcmdQZXJzb24BABNPYmplY3RDbGFzczpwZXJzb24gAQAQT2JqZWN0Q2xhc3M6IHRvcAEABGNuOiABAARzbjogAQAGbWFpbDogAQAOdXNlcnBhc3N3b3JkOiAMAGQAXQwAegD1DAD2APcMAHAAXQwAeQBhAQBNb3JnL2FwYWNoZS9kaXJlY3RvcnkvYXBpL2xkYXAvbW9kZWwvZXhjZXB0aW9uL0xkYXBFbnRyeUFscmVhZHlFeGlzdHNFeGNlcHRpb24MAHIAXQEAhFByb2Nlc3Nlcy9GT1NCUE1JbnRlcmZhY2UvQWRhcHRlci9GT1NCUE1JbnRlcmZhY2UvU3ViUHJvY2Vzc2VzL1Jlc291cmNlQ3JlYXRpb25BbmRNYXBwaW5nL1Byb2Nlc3Nlcy9MZGFwRW50cnkvTGRhcEVudHJ5TGRhcEVudHJ5Q29kZQEAM29yZy9hcGFjaGUvZGlyZWN0b3J5L2xkYXAvY2xpZW50L2FwaS9MZGFwQ29ubmVjdGlvbgEAOW9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoUmVxdWVzdAEAN29yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL2N1cnNvci9TZWFyY2hDdXJzb3IBABYoTGphdmEvbGFuZy9TdHJpbmc7SSlWAQAEYmluZAEAJyhMamF2YS9sYW5nL1N0cmluZztMamF2YS9sYW5nL1N0cmluZzspVgEAD3ByaW50U3RhY2tUcmFjZQEAN29yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoU2NvcGUBAAdTVUJUUkVFAQA5TG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoU2NvcGU7AQAIc2V0U2NvcGUBAHYoTG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoU2NvcGU7KUxvcmcvYXBhY2hlL2RpcmVjdG9yeS9hcGkvbGRhcC9tb2RlbC9tZXNzYWdlL1NlYXJjaFJlcXVlc3Q7AQANYWRkQXR0cmlidXRlcwEAUChbTGphdmEvbGFuZy9TdHJpbmc7KUxvcmcvYXBhY2hlL2RpcmVjdG9yeS9hcGkvbGRhcC9tb2RlbC9tZXNzYWdlL1NlYXJjaFJlcXVlc3Q7AQAMc2V0VGltZUxpbWl0AQA+KEkpTG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoUmVxdWVzdDsBABYoW0xqYXZhL2xhbmcvU3RyaW5nOylWAQAHc2V0QmFzZQEAaihMb3JnL2FwYWNoZS9kaXJlY3RvcnkvYXBpL2xkYXAvbW9kZWwvbmFtZS9EbjspTG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoUmVxdWVzdDsBAAZhcHBlbmQBAC0oTGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL2xhbmcvU3RyaW5nQnVpbGRlcjsBAAh0b1N0cmluZwEACXNldEZpbHRlcgEATyhMamF2YS9sYW5nL1N0cmluZzspTG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoUmVxdWVzdDsBAAZzZWFyY2gBAHYoTG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL21lc3NhZ2UvU2VhcmNoUmVxdWVzdDspTG9yZy9hcGFjaGUvZGlyZWN0b3J5L2FwaS9sZGFwL21vZGVsL2N1cnNvci9TZWFyY2hDdXJzb3I7AQAEbmV4dAEAAygpWgEAA2dldAEAFCgpTGphdmEvbGFuZy9PYmplY3Q7AQAIZ2V0RW50cnkBADMoKUxv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</byteCode>
                </class>
            </byteCode>
        </config>
        <pd:inputBindings>
            <javaCodeActivityInput>
                <Name>
                    <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:orgmodelname"/>
                </Name>
                <mail>
                    <xsl:value-of select="$Start/pfx13:ldapentryinput/pfx13:email"/>
                </mail>
                <password>
                    <xsl:value-of select="generate-id($Start/pfx13:ldapentryinput)"/>
                </password>
                <LDapHostName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/LDAPHost"/>
                </LDapHostName>
                <LDapUserName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/LDAPUserName"/>
                </LDapUserName>
                <LDapPassword>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/LDAPPassword"/>
                </LDapPassword>
                <LDapPartitionName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/LDAPPartitionName"/>
                </LDapPartitionName>
                <resourceCreationDN>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/ResourceCreationName"/>
                </resourceCreationDN>
                <SucessoutputMessage>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/SuccessOutputMessage"/>
                </SucessoutputMessage>
                <FailureOutputMessage>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/FailureOutputMessage"/>
                </FailureOutputMessage>
                <LDapPort>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/ExternalLDAP/port"/>
                </LDapPort>
            </javaCodeActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Successfull LDAP Entry Log">
        <pd:type>com.tibco.plugin.file.FileWriteActivity</pd:type>
        <pd:resourceType>ae.activities.FileWriteActivity</pd:resourceType>
        <pd:x>502</pd:x>
        <pd:y>43</pd:y>
        <config>
            <encoding>text</encoding>
            <compressFile>None</compressFile>
            <append>true</append>
        </config>
        <pd:inputBindings>
            <ns5:WriteActivityInputTextClass>
                <fileName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/FileNames/LogFile"/>
                </fileName>
                <textContent>
                    <xsl:value-of select="concat($Start/pfx13:ldapentryinput/pfx13:firstname,&quot;LDAP Entry Created Succesfully &quot;)"/>
                </textContent>
                <addLineSeparator>
                    <xsl:value-of select="1"/>
                </addLineSeparator>
            </ns5:WriteActivityInputTextClass>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Password Logs">
        <pd:type>com.tibco.plugin.file.FileWriteActivity</pd:type>
        <pd:resourceType>ae.activities.FileWriteActivity</pd:resourceType>
        <pd:x>347</pd:x>
        <pd:y>34</pd:y>
        <config>
            <encoding>text</encoding>
            <compressFile>None</compressFile>
            <createMissingDirectories>false</createMissingDirectories>
            <append>true</append>
        </config>
        <pd:inputBindings>
            <ns5:WriteActivityInputTextClass>
                <fileName>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BPM/CreateResource/FileNames/PasswordLogs"/>
                </fileName>
                <textContent>
                    <xsl:value-of select="concat(&quot;Name : &quot;,$Start/pfx13:ldapentryinput/pfx13:orgmodelname,&quot;  Password : &quot;,generate-id($Start/pfx13:ldapentryinput))"/>
                </textContent>
                <addLineSeparator>
                    <xsl:value-of select="1"/>
                </addLineSeparator>
            </ns5:WriteActivityInputTextClass>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>Ldap Entry Code</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Ldap Entry Code</pd:from>
        <pd:to>Failure LDAP Entry Log</pd:to>
        <pd:xpathDescription>Failure</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Ldap-Entry-Code/javaCodeActivityOutput/outputMessage="Failure"</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Call Resource Mapping Process</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Failure LDAP Entry Log</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Successfull LDAP Entry Log</pd:from>
        <pd:to>Call Resource Mapping Process</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Ldap Entry Code</pd:from>
        <pd:to>Password Logs</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Password Logs</pd:from>
        <pd:to>Successfull LDAP Entry Log</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>