<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no" name="UserTaskPageFlow"
    suppressJoinFailure="yes" tibex:bxVersion="1.15.0"
    tibex:explicitCompensation="yes"
    tibex:xpdlId="_p7fOoN_CEeec4K-r6PSjHg"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="ContractorMobileTask">
            <startingVariables>
                <variable>TechnicalInfo</variable>
                <variable>Provisioning_Data</variable>
                <variable>SelectedContractor</variable>
                <variable>TaskName</variable>
                <variable>CommentHistory</variable>
                <variable>CommentText</variable>
                <variable>SelectedContractorGroup</variable>
                <variable>GroupNames</variable>
                <variable>ContractorNames</variable>
            </startingVariables>
        </task>
        <task name="StartEvent">
            <ProcessManagerScript type="Complete">
                <variable>infoLoggerFlag</variable>
                <variable>Provisioning_Data</variable>
                <variable>TaskName</variable>
                <variable>CommentHistory</variable>
                <variable>CommentDataSet</variable>
                <variable>GrpNames</variable>
                <variable>PM_List</variable>
                <variable>CtrMobileTaskDecision</variable>
            </ProcessManagerScript>
        </task>
        <task name="ConfirmDetails">
            <startingVariables>
                <variable>TechnicalInfo</variable>
                <variable>Provisioning_Data</variable>
                <variable>TaskName</variable>
                <variable>CommentText</variable>
                <variable>ContractorNames</variable>
                <variable>PM_List</variable>
                <variable>GrpNames</variable>
                <variable>mgmtIPFlag</variable>
                <variable>equipmentFlag</variable>
                <variable>UID</variable>
                <variable>SelectedContractor</variable>
                <variable>CommentHistory</variable>
                <variable>SelectedPM</variable>
                <variable>xDMSURL</variable>
                <variable>SelectedContractorGroup</variable>
                <variable>GroupNames</variable>
                <variable>FolderID</variable>
            </startingVariables>
            <ProcessManagerScript type="Complete">
                <variable>infoLoggerFlag</variable>
                <variable>SelectedPM</variable>
                <variable>TaskName</variable>
                <variable>SelectedContractorGroup</variable>
            </ProcessManagerScript>
            <ProcessManagerScript type="Initiate">
                <variable>infoLoggerFlag</variable>
                <variable>TaskName</variable>
                <variable>PM_List</variable>
                <variable>CtrGroups_List</variable>
            </ProcessManagerScript>
        </task>
        <task name="ServiceTask">
            <startingVariables>
                <variable>commentDataCase</variable>
                <variable>commentDataCaseRef</variable>
            </startingVariables>
            <ProcessManagerScript type="Initiate">
                <variable>commentDataCase</variable>
                <variable>Provisioning_Data</variable>
                <variable>CommentText</variable>
                <variable>TaskName</variable>
            </ProcessManagerScript>
        </task>
        <task name="EndEvent">
            <ProcessManagerScript type="Initiate">
                <variable>infoLoggerFlag</variable>
            </ProcessManagerScript>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:variables>
        <bpws:variable name="Provisioning_Data"
            tibex:class="com.sfc.fosImpl.dataModel.ProvisioningDataModel"
            tibex:parameter="inout" tibex:xpdlId="_lj7GkN_EEeec4K-r6PSjHg"/>
        <bpws:variable name="TechnicalInfo"
            tibex:class="com.sfc.fosImpl.dataModel.TechnicalInformation"
            tibex:parameter="inout" tibex:xpdlId="_B5SCMOOtEeeI1KWnGZEQgA"/>
        <bpws:variable name="TaskName" tibex:parameter="inout"
            tibex:xpdlId="_yiVywOO_EeeYfI0_sV0YAA" type="xsd:string"/>
        <bpws:variable name="Mail" tibex:parameter="inout"
            tibex:xpdlId="_RHxX4OYZEeep9dkvO_z3LA" type="xsd:string"/>
        <bpws:variable name="GroupNames" tibex:array="yes"
            tibex:parameter="inout"
            tibex:xpdlId="_Ni4kEPEKEee5fIpJptHEZA" type="xsd:string"/>
        <bpws:variable name="SelectedContractorGroup"
            tibex:parameter="inout"
            tibex:xpdlId="_8EQNMPENEeeJiLkPq4yokA" type="xsd:string"/>
        <bpws:variable name="SelectedContractor" tibex:parameter="inout"
            tibex:xpdlId="_5uqrgPExEeeMCZGsP3rsrw" type="xsd:string"/>
        <bpws:variable name="ContractorNames" tibex:array="yes"
            tibex:parameter="inout"
            tibex:xpdlId="_oC8T0PE1EeeMCZGsP3rsrw" type="xsd:string"/>
        <bpws:variable name="CommentHistory" tibex:array="yes"
            tibex:class="com.sfc.fosImpl.dataModel.CommentData"
            tibex:parameter="inout" tibex:xpdlId="_-MbHoPRPEeeMCZGsP3rsrw"/>
        <bpws:variable name="CommentText" tibex:parameter="inout"
            tibex:xpdlId="_cbofIPR6Eeez78ayMGlX3w" type="xsd:string"/>
        <bpws:variable name="EscalationEmail" tibex:parameter="inout"
            tibex:xpdlId="_CNJI0PUFEeeywP4RjejZPQ" type="xsd:string"/>
        <bpws:variable name="commentDataCase"
            tibex:class="com.sfc.fosImpl.dataModel.CommentDataCase"
            tibex:parameter="inout" tibex:xpdlId="_ZJBQwPacEee_OvMSeNQu6A"/>
        <bpws:variable name="CommentDataSet" tibex:array="yes"
            tibex:classRef="com.sfc.fosImpl.dataModel.CommentDataCase"
            tibex:parameter="inout" tibex:xpdlId="_mN798PavEeeVceMtR_75Ng"/>
        <bpws:variable name="commentDataCaseRef"
            tibex:classRef="com.sfc.fosImpl.dataModel.CommentDataCase"
            tibex:parameter="inout" tibex:xpdlId="_kf1YAfacEee_OvMSeNQu6A"/>
        <bpws:variable name="SelectedPM" tibex:parameter="inout"
            tibex:xpdlId="_ZLtykBB-EeiTfu82n897bg" type="xsd:string"/>
        <bpws:variable name="mgmtIPFlag" tibex:parameter="inout"
            tibex:xpdlId="_7_cSEBRhEeiI4LtXlpi0-g" type="xsd:boolean"/>
        <bpws:variable name="equipmentFlag" tibex:parameter="inout"
            tibex:xpdlId="_9WKNYBRhEeiI4LtXlpi0-g" type="xsd:boolean"/>
        <bpws:variable name="UID" tibex:parameter="inout"
            tibex:xpdlId="_1bmpMBUzEeiHR83Su52TNA" type="xsd:string"/>
        <bpws:variable name="FolderID" tibex:parameter="inout"
            tibex:xpdlId="_4qOhUBUzEeiHR83Su52TNA" type="xsd:string"/>
        <bpws:variable name="xDMSURL" tibex:parameter="inout"
            tibex:xpdlId="_5VCY4BUzEeiHR83Su52TNA" type="xsd:string"/>
        <bpws:variable name="AccountType" tibex:array="yes"
            tibex:xpdlId="_PNS9kPt1EeeupNwu8S8N4Q" type="xsd:string"/>
        <bpws:variable name="AccountEntries"
            tibex:classRef="com.sfc.fosImpl.dataModel.LookupTable" tibex:xpdlId="_ej8-gft1EeeupNwu8S8N4Q"/>
        <bpws:variable name="SystemParamRef"
            tibex:classRef="com.sfc.fosImpl.dataModel.SystemParameters" tibex:xpdlId="_Sc-sEAlfEeiPXa3e9UY2HA"/>
        <bpws:variable name="CtrMobileTaskDecision"
            tibex:xpdlId="_ZwCC8AlfEeiPXa3e9UY2HA" type="xsd:boolean"/>
        <bpws:variable name="infoLoggerFlag"
            tibex:xpdlId="_9TAXsBPdEeiI4LtXlpi0-g" type="xsd:boolean"/>
        <bpws:variable name="PM_List" tibex:array="yes"
            tibex:xpdlId="_1Xb9YBPfEeiI4LtXlpi0-g" type="xsd:string"/>
        <bpws:variable name="CtrGroups_List" tibex:array="yes"
            tibex:xpdlId="_cY6fUBRYEeiI4LtXlpi0-g" type="xsd:string"/>
        <bpws:variable name="GrpNames" tibex:array="yes"
            tibex:xpdlId="_HiVqUBReEeiI4LtXlpi0-g" type="xsd:string"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_C6t4oBYDEeiU0buANAV9_Q">
        <bpws:links>
            <bpws:link name="ConfirmDetails to ServiceTask" tibex:xpdlId="_GAPJYPaZEee_OvMSeNQu6A"/>
            <bpws:link name="ServiceTask to EndEvent" tibex:xpdlId="_Cpfco9_HEeec4K-r6PSjHg"/>
            <bpws:link name="ContractorMobileTask to ServiceTask" tibex:xpdlId="_7p1uoAliEeiPXa3e9UY2HA"/>
            <bpws:link name="_iwMb4AlfEeiPXa3e9UY2HA to ConfirmDetails" tibex:xpdlId="_5nGy8N_CEeec4K-r6PSjHg"/>
            <bpws:link
                name="_iwMb4AlfEeiPXa3e9UY2HA to ContractorMobileTask" tibex:xpdlId="_joofwAlfEeiPXa3e9UY2HA"/>
            <bpws:link name="StartEvent to _iwMb4AlfEeiPXa3e9UY2HA" tibex:xpdlId="_iwMb4QlfEeiPXa3e9UY2HA"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_tHTqYt_CEeec4K-r6PSjHg" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to _iwMb4AlfEeiPXa3e9UY2HA"/>
                </bpws:sources>
                <tibex:completedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var  provInfoLogging = cac_com_sfc_fosImpl_dataModel_SystemParameters.findByPropertyName("PROVISIONING_INFO_LOGGING");
if((provInfoLogging !=null) && (provInfoLogging.readSystemParameters() !=null)){
	if(provInfoLogging.readSystemParameters().propertyValue=="Y") {
		infoLoggerFlag=true;
	}
	else {
		infoLoggerFlag=false;
	}
}

if(TaskName=="GateKeeper") {
	var PMList=Process.getOrgModel().groupByName("PM").get(0).getResources();
	if(infoLoggerFlag==true) {
		Log.write("[SFC_FOSIMPL_BPM] UserTaskPageFLow_Complete_Script_Start_Event_PM_Performer : "+PMList.size());
	}
	for(var i=0;i<PMList.size();i++) {
		if(infoLoggerFlag==true) {
			Log.write("[SFC_FOSIMPL_BPM] UserTaskPageFlow_Complete_Script_Start_Event_getName : "+PMList.get(i).getName());
		}	
		PM_List.add(PMList.get(i).getName());	
	}
}
else if(TaskName == "PM_Track_Installation") {
	var criteria = "masterUser='Y'";	
	var Fetch_Groups=cac_com_sfc_fosImpl_dataModel_ContractorGroups.findByCriteria(criteria);
	for(var i=0;i<Fetch_Groups.size();i++) {	
		GrpNames.add(i,Fetch_Groups.get(i).readContractorGroups().contractorGroupName);
	}
}


/*

if(TaskName=="PM_Review"){
var a=Process.getOriginatorName();
EscalationEmail=Process.getOrgModel().resourceByName(a).get(0).getAttributeValue("Email").get(0);

}

if(TaskName=="Manual_Installation_Removal") {
	SystemParamRef= cac_com_sfc_fosImpl_dataModel_SystemParameters.findByPropertyName("Contractor_Mobile_Task_Flag");
	if(SystemParamRef.readSystemParameters().propertyValue=="Enable") {
		CtrMobileTaskDecision = true;
	}
	else {
		CtrMobileTaskDecision=false;
	}
}
*/

CtrMobileTaskDecision=false;

var criteria = "siebelCircuitID='"+Provisioning_Data.siebelCircuitID+"'";
CommentDataSet=cac_com_sfc_fosImpl_dataModel_CommentDataCase.findByCriteria(criteria);

CommentHistory.clear();
if(CommentDataSet.size()>0){
	for(var index=0; index<CommentDataSet.size(); index++) {
		var comment=com_sfc_fosImpl_dataModel_Factory.createCommentData();
		comment.addedby=CommentDataSet.get(index).readCommentDataCase().addedby;
		comment.comments=CommentDataSet.get(index).readCommentDataCase().comments;
		comment.stepName=CommentDataSet.get(index).readCommentDataCase().taskName;
		comment.time=CommentDataSet.get(index).readCommentDataCase().time;
		CommentHistory.add(comment);	
	}
}
]]></tibex:completedScript>
                <tibex:parameters>
                    <parameterDescription mode="InOut" name="TechnicalInfo"/>
                    <parameterDescription mode="InOut" name="Provisioning_Data"/>
                    <parameterDescription mode="InOut" name="CommentText"/>
                    <parameterDescription mode="InOut" name="TaskName"/>
                    <parameterDescription mode="InOut" name="ContractorNames"/>
                    <parameterDescription mode="InOut" name="EscalationEmail"/>
                    <parameterDescription mode="InOut" name="mgmtIPFlag"/>
                    <parameterDescription mode="InOut" name="equipmentFlag"/>
                    <parameterDescription mode="InOut" name="commentDataCase"/>
                    <parameterDescription mode="InOut" name="UID"/>
                    <parameterDescription mode="InOut" name="SelectedPM"/>
                    <parameterDescription mode="InOut" name="SelectedContractor"/>
                    <parameterDescription mode="InOut" name="CommentHistory"/>
                    <parameterDescription mode="InOut" name="commentDataCaseRef"/>
                    <parameterDescription mode="InOut" name="xDMSURL"/>
                    <parameterDescription mode="InOut" name="SelectedContractorGroup"/>
                    <parameterDescription mode="InOut" name="Mail"/>
                    <parameterDescription mode="InOut" name="GroupNames"/>
                    <parameterDescription mode="InOut" name="CommentDataSet"/>
                    <parameterDescription mode="InOut" name="FolderID"/>
                </tibex:parameters>
                <tibex:completedScript
                    expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"><![CDATA[var  provInfoLogging = cac_com_sfc_fosImpl_dataModel_SystemParameters.findByPropertyName("PROVISIONING_INFO_LOGGING");
if((provInfoLogging !=null) && (provInfoLogging.readSystemParameters() !=null)){
	if(provInfoLogging.readSystemParameters().propertyValue=="Y") {
		infoLoggerFlag=true;
	}
	else {
		infoLoggerFlag=false;
	}
}

if(TaskName=="GateKeeper") {
	var PMList=Process.getOrgModel().groupByName("PM").get(0).getResources();
	if(infoLoggerFlag==true) {
		Log.write("[SFC_FOSIMPL_BPM] UserTaskPageFLow_Complete_Script_Start_Event_PM_Performer : "+PMList.size());
	}
	for(var i=0;i<PMList.size();i++) {
		if(infoLoggerFlag==true) {
			Log.write("[SFC_FOSIMPL_BPM] UserTaskPageFlow_Complete_Script_Start_Event_getName : "+PMList.get(i).getName());
		}	
		PM_List.add(PMList.get(i).getName());	
	}
}
else if(TaskName == "PM_Track_Installation") {
	var criteria = "masterUser='Y'";	
	var Fetch_Groups=cac_com_sfc_fosImpl_dataModel_ContractorGroups.findByCriteria(criteria);
	for(var i=0;i<Fetch_Groups.size();i++) {	
		GrpNames.add(i,Fetch_Groups.get(i).readContractorGroups().contractorGroupName);
	}
}


/*

if(TaskName=="PM_Review"){
var a=Process.getOriginatorName();
EscalationEmail=Process.getOrgModel().resourceByName(a).get(0).getAttributeValue("Email").get(0);

}

if(TaskName=="Manual_Installation_Removal") {
	SystemParamRef= cac_com_sfc_fosImpl_dataModel_SystemParameters.findByPropertyName("Contractor_Mobile_Task_Flag");
	if(SystemParamRef.readSystemParameters().propertyValue=="Enable") {
		CtrMobileTaskDecision = true;
	}
	else {
		CtrMobileTaskDecision=false;
	}
}
*/

CtrMobileTaskDecision=false;

var criteria = "siebelCircuitID='"+Provisioning_Data.siebelCircuitID+"'";
CommentDataSet=cac_com_sfc_fosImpl_dataModel_CommentDataCase.findByCriteria(criteria);

CommentHistory.clear();
if(CommentDataSet.size()>0){
	for(var index=0; index<CommentDataSet.size(); index++) {
		var comment=com_sfc_fosImpl_dataModel_Factory.createCommentData();
		comment.addedby=CommentDataSet.get(index).readCommentDataCase().addedby;
		comment.comments=CommentDataSet.get(index).readCommentDataCase().comments;
		comment.stepName=CommentDataSet.get(index).readCommentDataCase().taskName;
		comment.time=CommentDataSet.get(index).readCommentDataCase().time;
		CommentHistory.add(comment);	
	}
}
]]></tibex:completedScript>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:type="endEvent" tibex:xpdlId="_tHTqY9_CEeec4K-r6PSjHg">
            <tibex:initiatedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[if(infoLoggerFlag==true) {
	Log.write("[SFC_FOSIMPL_BPM] UserTaskPageFlow_Initiate_Script_End_Event");
}	]]></tibex:initiatedScript>
            <bpws:targets>
                <bpws:target linkName="ServiceTask to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="ConfirmDetails"
                tibex:extendedAttributes="bpmJspTask=form\://comsfcfosImplremoval_tobe_pageflow/comsfcfosImplremoval_tobe_pageflowProcess/ConfirmDetails/GatekeeperApproval.form&#xd;&#xa;"
                tibex:type="userTask"
                tibex:xpdlId="_7fQnYN_CEeec4K-r6PSjHg" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_iwMb4AlfEeiPXa3e9UY2HA to ConfirmDetails"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ConfirmDetails to ServiceTask"/>
                </bpws:sources>
                <model:PageActivityDataModelType xmi:version="2.0"
                    xmlns:model="http://model.pageactivity.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <pageActivityParameters>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="Provisioning_Data"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TechnicalInfo"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TaskName"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="GroupNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedContractorGroup"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedContractor"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="ContractorNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentText"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentHistory"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedPM"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="PM_List"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="GrpNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="mgmtIPFlag"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="equipmentFlag"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="FolderID"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="xDMSURL"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="UID"/>
                    </pageActivityParameters>
                </model:PageActivityDataModelType>
                <tibex:completedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var Log_Activity_Name=TaskName;
var Log_Activity_Type="End";
var Log_Activity_Resource="USER";
if( (infoLoggerFlag==true) && (TaskName=="GateKeeper") ){
	Log.write("[SFC_FOSIMPL_BPM] UserTask_Complete_Script_Selected_PM : "+SelectedPM);
}
else if( (infoLoggerFlag==true) && (TaskName=="GateKeeper")) {
	Log.write("[SFC_FOSIMPL_BPM] UserTask_Complete_Script_Selected_Contractor_Group :"+SelectedContractorGroup);
}]]></tibex:completedScript>
                <tibex:initiatedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[var Log_Activity_Name=TaskName;
var Log_Activity_Type="Start";
var Log_Activity_Resource="USER";

if( (infoLoggerFlag==true) && (TaskName=="GateKeeper") ){
	Log.write("[SFC_FOSIMPL_BPM] UserTask_Initiate_Script_PM_List_Size :"+PM_List.size());
}
else if( (infoLoggerFlag==true) && (TaskName=="GateKeeper")) {
	Log.write("[SFC_FOSIMPL_BPM] UserTask_Initiate_Script_PM_List_Size :"+CtrGroups_List.size());
}]]></tibex:initiatedScript>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ServiceTask"
                tibex:type="serviceTask"
                tibex:xpdlId="_GAOiUPaZEee_OvMSeNQu6A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="ConfirmDetails to ServiceTask"/>
                    <bpws:target linkName="ContractorMobileTask to ServiceTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ServiceTask to EndEvent"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[commentDataCaseRef = cac_com_sfc_fosImpl_dataModel_CommentDataCase.create(commentDataCase);]]></tibex:script>
                <tibex:initiatedScript expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[/*var size=CommentHistory.size();
commentDataCase.addedby=CommentHistory.get(size).addedby;
commentDataCase.comments=CommentHistory.get(size).comments;
commentDataCase.taskName=CommentHistory.get(size).stepName;
commentDataCase.time=CommentHistory.get(size).time;
*/
commentDataCase=com_sfc_fosImpl_dataModel_Factory.createCommentDataCase();
commentDataCase.addedby=Process.getOriginatorName();
commentDataCase.comments=CommentText;
for(var index=0; index<TaskName.length; index++) {
	var name=TaskName.replace("_"," ");
}
commentDataCase.taskName=name;
commentDataCase.time=DateTimeUtil.createDatetime();
commentDataCase.siebelCircuitID=Provisioning_Data.siebelCircuitID;

Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.addedby);
Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.comments);
Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.siebelCircuitID);
Log.write("[SFC FOS IMPL] The comments are:"+commentDataCase.taskName);]]></tibex:initiatedScript>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ContractorMobileTask"
                tibex:extendedAttributes="bpmJspTask=form\://comsfcfosImplremoval_tobe_pageflow/comsfcfosImplremoval_tobe_pageflowProcess/Contractor/ManualInstallation_Remote.form&#xd;&#xa;"
                tibex:type="userTask"
                tibex:xpdlId="_gfp8oAlfEeiPXa3e9UY2HA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_iwMb4AlfEeiPXa3e9UY2HA to ContractorMobileTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ContractorMobileTask to ServiceTask"/>
                </bpws:sources>
                <model:PageActivityDataModelType xmi:version="2.0"
                    xmlns:model="http://model.pageactivity.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <pageActivityParameters>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TechnicalInfo"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedContractor"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="TaskName"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentHistory"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="SelectedContractorGroup"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="GroupNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="Provisioning_Data"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="ContractorNames"/>
                        <pageActivityParameter mandatory="false"
                            mode="INOUT" name="CommentText"/>
                    </pageActivityParameters>
                </model:PageActivityDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:empty name="_BX_gateway__iwMb4AlfEeiPXa3e9UY2HA"
            tibex:type="exclusiveGateway" tibex:xpdlId="_iwMb4AlfEeiPXa3e9UY2HA">
            <bpws:targets>
                <bpws:target linkName="StartEvent to _iwMb4AlfEeiPXa3e9UY2HA"/>
            </bpws:targets>
            <bpws:sources tibex:maxTrue="1">
                <bpws:source linkName="_iwMb4AlfEeiPXa3e9UY2HA to ConfirmDetails">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[##otherwise##]]></bpws:transitionCondition>
                </bpws:source>
                <bpws:source linkName="_iwMb4AlfEeiPXa3e9UY2HA to ContractorMobileTask">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[(CtrMobileTaskDecision==true);]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
        </bpws:empty>
    </bpws:flow>
</bpws:process>
